import{k as p}from"./index-CcH9v4Gi.js";const n=new Map;async function g(r=!1,u={}){const t=p().params.room_code,s=Array.isArray(t)?t[0]:typeof t=="string"?t:void 0;if(!s)return null;const{signal:a,timeoutMs:f=8e3}=u,e=s;if(r&&n.has(e))return n.get(e);const o=new AbortController,m=setTimeout(()=>o.abort(),f);a&&(a.aborted?o.abort():a.addEventListener("abort",()=>o.abort(),{once:!0}));const i=(async()=>{try{const l=await fetch(`https://api.pen.lighting/rooms/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},signal:o.signal});return l.ok?await l.json():null}catch{return null}finally{clearTimeout(m)}})();r&&n.set(e,i);const c=await i;return c===null&&r&&n.delete(e),c}export{g as u};
